{% extends "base.html" %}

{% block content %}

		<form method="post">
			{{ form.hidden_tag() }}
			<p>{{add_field_form.fields_list.label}}: {{add_field_form.fields_list()}}</p>
	      <p>{{add_field_form.add_field()}}</p>
	      
			{% for error in add_field_form.errors %}
			     	 	<span style="color: red;">[{{ error }}]</span>
			{% endfor %}
		</form>
	
     <form method="post" enctype="multipart/form-data">
			{{ form.hidden_tag() }}
			<p>{{ form.name.label}}: {{ form.name() }}</p>
			{% for field, label in extra_fields %}
					{% if field.type not in ['CSRFTokenField', 'HiddenField'] %}
						
					<p>Label: {{ label() }}</p>
					<p>
						{% if (field.type != "FileField") %}
							{{ field.label }}: 
						{% else %}
							{{ field.label.text['label'] }}:
						{% endif %}

						{{ field() }} 

						{% if (field.type == "FileField") and (field.label.text['filename']) %}
						<a href="{{ url_for('download_file', filename = field.label.text['encrypted_filename']) }}">
							<b>{{ field.label.text['filename'] }}</b>
						</a>
					{% endif %}

					<a href="{{ url_for('delete_field_in_template', template_id = template_id,field_id = field.id) }}">
						<b>{{ _('Delete')}}</b>
							</a>
					</p>
					{% endif %}
					{% for error in field.errors %}
			     	 	<span style="color: red;">[{{ error }}]</span>
			      {% endfor %}
			{% endfor %}
			
			{% for error in form.errors %}
			     	 	<span style="color: red;">[{{ error }}]</span>
			{% endfor %}
			
       <p>{{ form.submit() }}</p>
     </form>
     
{% endblock %}



